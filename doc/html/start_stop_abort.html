<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hexeng2D: Starting, Stopping and Aborting a Stream</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="hexeng2d_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Hexeng2D<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">An open source 2D Game Engine framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('start_stop_abort.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Starting, Stopping and Aborting a Stream </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="tut_startstop1"></a>
Starting, Stopping and Aborting a Stream</h1>
<p >PortAudio will not start playing back audio until you start the stream. After calling <a class="el" href="portaudio_8h.html#a7432aadd26c40452da12fa99fc1a047b">Pa_StartStream()</a>, PortAudio will start calling your callback function to perform the audio processing.</p>
<div class="fragment"><div class="line">err = <a class="code hl_function" href="portaudio_8h.html#a7432aadd26c40452da12fa99fc1a047b">Pa_StartStream</a>( <a class="code hl_typedef" href="glad_8h.html#ad02d2488127e1cf9a27262c4ee30ba85">stream</a> );</div>
<div class="line"><span class="keywordflow">if</span>( err != <a class="code hl_enumvalue" href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba">paNoError</a> ) <span class="keywordflow">goto</span> error;</div>
<div class="ttc" id="aglad_8h_html_ad02d2488127e1cf9a27262c4ee30ba85"><div class="ttname"><a href="glad_8h.html#ad02d2488127e1cf9a27262c4ee30ba85">stream</a></div><div class="ttdeci">GLuint GLuint stream</div><div class="ttdef"><b>Definition:</b> glad.h:2815</div></div>
<div class="ttc" id="aportaudio_8h_html_a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba"><div class="ttname"><a href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba">paNoError</a></div><div class="ttdeci">@ paNoError</div><div class="ttdef"><b>Definition:</b> portaudio.h:124</div></div>
<div class="ttc" id="aportaudio_8h_html_a7432aadd26c40452da12fa99fc1a047b"><div class="ttname"><a href="portaudio_8h.html#a7432aadd26c40452da12fa99fc1a047b">Pa_StartStream</a></div><div class="ttdeci">PaError Pa_StartStream(PaStream *stream)</div><div class="ttdef"><b>Definition:</b> pa_front.c:1431</div></div>
</div><!-- fragment --><p >You can communicate with your callback routine through the data structure you passed in on the open call, or through global variables, or using other interprocess communication techniques, but please be aware that your callback function may be called at interrupt time when your foreground process is least expecting it. So avoid sharing complex data structures that are easily corrupted like double linked lists, and avoid using locks such as mutexes as this may cause your callback function to block and therefore drop audio. Such techniques may even cause deadlock on some platforms.</p>
<p >PortAudio will continue to call your callback and process audio until you stop the stream. This can be done in one of several ways, but, before we do so, we'll want to see that some of our audio gets processed by sleeping for a few seconds. This is easy to do with <a class="el" href="portaudio_8h.html#a1b3c20044c9401c42add29475636e83d">Pa_Sleep()</a>, which is used by many of the examples in the patests/ directory for exactly this purpose. Note that, for a variety of reasons, you can not rely on this function for accurate scheduling, so your stream may not run for exactly the same amount of time as you expect, but it's good enough for our example.</p>
<div class="fragment"><div class="line"><span class="comment">/* Sleep for several seconds. */</span></div>
<div class="line"><a class="code hl_function" href="portaudio_8h.html#a1b3c20044c9401c42add29475636e83d">Pa_Sleep</a>(<a class="code hl_define" href="paex__mono__asio__channel__select_8c.html#a40d4ce5dac355662b3ee76bc605f1430">NUM_SECONDS</a>*1000);</div>
<div class="ttc" id="apaex__mono__asio__channel__select_8c_html_a40d4ce5dac355662b3ee76bc605f1430"><div class="ttname"><a href="paex__mono__asio__channel__select_8c.html#a40d4ce5dac355662b3ee76bc605f1430">NUM_SECONDS</a></div><div class="ttdeci">#define NUM_SECONDS</div><div class="ttdef"><b>Definition:</b> paex_mono_asio_channel_select.c:54</div></div>
<div class="ttc" id="aportaudio_8h_html_a1b3c20044c9401c42add29475636e83d"><div class="ttname"><a href="portaudio_8h.html#a1b3c20044c9401c42add29475636e83d">Pa_Sleep</a></div><div class="ttdeci">void Pa_Sleep(long msec)</div><div class="ttdef"><b>Definition:</b> pa_unix_util.c:108</div></div>
</div><!-- fragment --><p >Now we need to stop playback. There are several ways to do this, the simplest of which is to call <a class="el" href="portaudio_8h.html#af18dd60220251286c337631a855e38a0">Pa_StopStream()</a>:</p>
<div class="fragment"><div class="line">err = <a class="code hl_function" href="portaudio_8h.html#af18dd60220251286c337631a855e38a0">Pa_StopStream</a>( <a class="code hl_typedef" href="glad_8h.html#ad02d2488127e1cf9a27262c4ee30ba85">stream</a> );</div>
<div class="line"><span class="keywordflow">if</span>( err != <a class="code hl_enumvalue" href="portaudio_8h.html#a2e45bf8b5145f131a91c128af2bdaec7aeb09d15a48b6c1034728a9c518cfe4ba">paNoError</a> ) <span class="keywordflow">goto</span> error;</div>
<div class="ttc" id="aportaudio_8h_html_af18dd60220251286c337631a855e38a0"><div class="ttname"><a href="portaudio_8h.html#af18dd60220251286c337631a855e38a0">Pa_StopStream</a></div><div class="ttdeci">PaError Pa_StopStream(PaStream *stream)</div><div class="ttdef"><b>Definition:</b> pa_front.c:1457</div></div>
</div><!-- fragment --><p ><a class="el" href="portaudio_8h.html#af18dd60220251286c337631a855e38a0">Pa_StopStream()</a> is designed to make sure that the buffers you've processed in your callback are all played, which may cause some delay. Alternatively, you could call <a class="el" href="portaudio_8h.html#a138e57abde4e833c457b64895f638a25">Pa_AbortStream()</a>. On some platforms, aborting the stream is much faster and may cause some data processed by your callback not to be played.</p>
<p >Another way to stop the stream is to return either paComplete, or paAbort from your callback. paComplete ensures that the last buffer is played whereas paAbort stops the stream as soon as possible. If you stop the stream using this technique, you will need to call <a class="el" href="portaudio_8h.html#af18dd60220251286c337631a855e38a0">Pa_StopStream()</a> before starting the stream again.</p>
<p >Previous: <a class="el" href="open_default_stream.html">Opening a Stream Using Defaults</a> | Next: <a class="el" href="terminating_portaudio.html">Closing a Stream and Terminating PortAudio</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
